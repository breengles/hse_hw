%!TEX root = kotov.tex
\section{Task 1}
\begin{task}
    Дан взвешенный неориентированный граф из $n \leq 20$ вершин. Найдите максимальное по весу паросочетание.
\end{task}

\begin{solution}
    Хорошо, с ребрами не прошло, тогда будет делать динамику по множеству вершин: заведем маску для множества вершин, которая будет говорить входит ли какая-то вершина в текущее рассматриваемое множество вершин, то есть $1$ --- входит, а $0$ --- не входит. Зададим сначала простые граничные условия: $d(0,\ldots,0) = 0$, еще можно, что для всякой маски $m_1$, содержащей ровно одну $1$, $d(m_1) = 0$, так как на одной вершине паросочетания с ребром не построить, то есть $d$ --- суммарный вес паросочетания.
    Теперь будет делать динамику по таким маскам, уменьшая количество вершин, спрашивая вершину $v$: можем сделать это двумя разными потенциальными путями, либо не взять вершину, тогда она просто пропадет из множества, то есть $V\backslash\{v\}$ или для каждой вершины $u:(uv)\in E$ спрашивать не войдут ли они, то есть пусть $d(M) = \max\limits_{v}\Bigg(d\big(M\backslash\{v\}\big), \max\limits_{u}\Big(w(uv) + d\big(M\backslash\{u,v\}\big)\Big)\Bigg)$.
    Тогда, для каждого $v$ мы сделаем $n$ операций, то есть всего $n^2$, и еще $2^n$ операций на подсчет веса для масок. Итоговая сложность будет $\O(n^22^n)$, что уже явно получше (для $n=20$ на современной машине будет считать порядка $4$с.).
    \begin{remark}
        Можно заметить (слова в текст тяжело передать), но нам не обязательно перебирать изначально все вершины $v$, мы можем взять какую-то одну вершину, потому что при расчете мы все равно генерируем маски в разных ветках динамики как для тех, где на месте для $v$ стоит $1$, так и для тех, где на месте $v$ стоит $0$, а потом глубже делаем то же самое для какой-то другой вершины, в итоге будут рассмотрены все случаи, маски для которых на каждой позиции либо имели $0$, либо имели $1$ (то есть это похоже на просто подсчет количества бинарных строк длины $n$, где нам не обязательно перебирать вообще все начальные точки, а можем взять только первую позицию, перебрать варианты для нее, где в каждом из вариантов перебрать для задачи поменьше и т. д.), надеюсь, более или менее ясна мысль. В итоге это позволит улучшить оценку до $\O(n2^n)$, что уже считается на современных машинах порядка $1$с.
    \end{remark}
    \begin{remark}
        Если нас все-таки интересует не вес, а само паросочетания, то надо будет хранить предков текущей маски и ребро, которое мы включили в паросочетание, тогда стандартно найдя в $d$ максимум по ссылкам из предков и соответствующим ребрам восстановим набор ребер.
    \end{remark}
\end{solution}